reports := input
  |> getLines
  |> .map toNumbers

function isSafe(report: number[])
  dir := report.1 - report.0 > 0

  for every i of [0...report# - 1]
    (1 <= report[i + int dir] - report[i + int !dir] <= 3)

part1 := reports.filter (report) => isSafe report
part2 := reports.filter (report) => isSafe(report) or report.some (level, index) => isSafe report.toSpliced index, 1

console.log part1#
console.log part2#